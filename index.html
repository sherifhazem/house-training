<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ูุธุงู ุฅุฏุงุฑุฉ ูุฑุจุท ุฌุงุฏุง - ุงูุฅุตุฏุงุฑ ุงููุชูุงูู</title>

  <!-- Libraries -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body class="text-slate-900 overflow-x-hidden">
  <div id="dashboard-container">
    <!-- Navigation -->
    <nav class="site-nav navy-gradient text-white p-5 shadow-2xl sticky top-0 z-50 no-print">
      <div class="nav-inner container mx-auto flex justify-between items-center">
        <div class="flex items-center gap-4">
          <div class="bg-cyan-500 p-2.5 rounded-2xl shadow-lg">
            <i data-lucide="horse" class="w-7 h-7 text-white"></i>
          </div>
          <div>
            <h1 class="text-xl font-bold tracking-tight">ุชุญููู ุงูุชุฏุฑูุจ ุงููููู ููุฑุจุท ุฌุงุฏุง</h1>
            <p class="text-[10px] text-cyan-300 opacity-80 uppercase tracking-widest">Executive Management System</p>
          </div>
        </div>
        <div class="flex gap-3 items-center">
          <button onclick="exportPDF()" class="bg-white/10 hover:bg-white/20 text-white px-5 py-2.5 rounded-xl text-sm font-bold transition flex items-center gap-2 border border-white/20">
            <i data-lucide="file-text" class="w-4 h-4"></i> ุชุตุฏูุฑ ุชูุฑูุฑ PDF
          </button>
          <div id="loader" class="hidden py-2"><div class="animate-spin rounded-full h-5 w-5 border-b-2 border-white"></div></div>
        </div>
      </div>
    </nav>

    <main class="container mx-auto p-4 md:p-8 space-y-8">

      <!-- Filters -->
      <div class="filter-card glass-card p-6 flex flex-wrap gap-4 items-end no-print">
        <div class="flex-1 min-w-[250px]">
          <label class="block text-xs font-bold text-slate-500 mb-2">ุงููุทุงู ุงูุฒููู</label>
          <div class="flex gap-2">
            <div class="w-full">
              <input type="date" id="startDate" class="w-full bg-slate-50 border border-slate-200 rounded-xl p-3 outline-none focus:ring-2 focus:ring-cyan-500 text-sm">
              <div class="date-hint">ุนุฑุถ: <span id="startDatePretty">--/--/----</span></div>
            </div>
            <div class="w-full">
              <input type="date" id="endDate" class="w-full bg-slate-50 border border-slate-200 rounded-xl p-3 outline-none focus:ring-2 focus:ring-cyan-500 text-sm">
              <div class="date-hint">ุนุฑุถ: <span id="endDatePretty">--/--/----</span></div>
            </div>
          </div>
        </div>

        <div class="flex-1 min-w-[150px]">
          <label class="block text-xs font-bold text-slate-500 mb-2 text-right">ุงุฎุชูุงุฑ ุงูุฎูู</label>
          <select id="horseFilter" onchange="applyFilters()" class="w-full bg-slate-50 border border-slate-200 rounded-xl p-3 outline-none focus:ring-2 focus:ring-cyan-500 text-sm">
            <option value="all">ูู ุงูุฎููู</option>
          </select>
        </div>

        <button onclick="applyFilters()" class="bg-slate-800 text-white px-8 py-3.5 rounded-xl font-bold transition-all hover:bg-black">ุชุญุฏูุซ ุงูุนุฑุถ</button>
      </div>

      <!-- PDF Report Header -->
      <div id="report-meta" class="hidden border-b-4 border-[#0b2447] pb-6 mb-8">
        <div class="flex justify-between items-end">
          <div>
            <h1 class="text-3xl font-black text-[#0b2447] mb-2">ุชูุฑูุฑ ุงูุฃุฏุงุก ุงูุฏูุฑู - ูุฑุจุท ุฌุงุฏุง</h1>
            <p class="text-slate-600 font-bold">ุชุงุฑูุฎ ุงูุชูุฑูุฑ: <span id="printDate"></span></p>
            <p class="text-slate-600 font-bold">ูุทุงู ุงูุชูุฑูุฑ: <span id="reportRange"></span></p>
          </div>
          <div class="text-right">
            <p class="text-xs font-bold text-slate-400">ูุธุงู ุงูุฅุฏุงุฑุฉ ุงูููุญุฏ</p>
          </div>
        </div>
      </div>

      <!-- KPI Cards -->
      <div class="kpi-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
        <div class="kpi-card glass-card p-6 border-r-4 border-slate-800">
          <p class="text-xs font-bold text-slate-500 uppercase mb-1">ุฅุฌูุงูู ุงูุญุตุต</p>
          <h3 id="statTotal" class="text-4xl font-black text-slate-900">--</h3>
        </div>
        <div class="kpi-card glass-card p-6 border-r-4 border-cyan-500">
          <p class="text-xs font-bold text-slate-500 uppercase mb-1">ูุชูุณุท ุงููุดุงุท</p>
          <h3 id="statAvg" class="text-4xl font-black text-slate-900">--</h3>
        </div>
        <div class="kpi-card glass-card p-6 border-r-4 border-emerald-500">
          <p class="text-xs font-bold text-slate-500 uppercase mb-1">ุฏูุงุฆู ุงูุชุฏุฑูุจ</p>
          <h3 id="statTime" class="text-4xl font-black text-slate-900">--</h3>
        </div>
        <div class="kpi-card glass-card p-6 border-r-4 border-rose-500">
          <p class="text-xs font-bold text-slate-500 uppercase mb-1">ูุคุดุฑ ุงูุณูุงูุฉ</p>
          <h3 id="statHealth" class="text-4xl font-black text-slate-900">--%</h3>
        </div>
      </div>

      <!-- Main Charts Row -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <div class="chart-card lg:col-span-2 glass-card p-8">
          <h4 class="text-lg font-bold mb-6 flex items-center gap-2 text-[#0b2447]">๐ ูุณุชูู ุงููุดุงุท ุงููููู (ุชุงุฑูุฎ ููุท)</h4>
          <div id="lineChart" class="chart-area min-h-[300px]"></div>
        </div>
        <div class="chart-card glass-card p-8">
          <h4 class="text-lg font-bold mb-6 flex items-center gap-2 text-[#0b2447]">๐ฅ ุณูุงูุฉ ุงูุฎูู</h4>
          <div id="healthGauge" class="chart-area min-h-[300px]"></div>
        </div>
      </div>

      <!-- Second Row: Pie Chart & Calendar -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <div class="chart-card glass-card p-8">
          <h4 class="text-lg font-bold mb-6 flex items-center gap-2 text-[#0b2447]">๐ฏ ุฃููุงุน ุงูุจุฑุงูุฌ</h4>
          <div id="trainingPie" class="chart-area min-h-[300px]"></div>
        </div>
        <div class="calendar-card lg:col-span-2 glass-card p-8">
          <div class="flex items-center justify-between mb-4">
            <h4 class="text-lg font-bold flex items-center gap-2 text-[#0b2447]">๐ ุชูููู ุงูุชุฏุฑูุจ (ุงูุณุจุช ุจุฏุงูุฉ ุงูุฃุณุจูุน)</h4>
            <div class="flex items-center gap-3 text-xs font-bold text-slate-500">
              <span class="flex items-center gap-1"><span class="w-3 h-3 rounded" style="background: var(--turquoise)"></span> ุชุฏุฑูุจ</span>
              <span class="flex items-center gap-1"><span class="w-3 h-3 rounded border border-dashed border-slate-300" style="background:#f1f5f9"></span> ุฑุงุญุฉ</span>
            </div>
          </div>
          <div class="text-xs font-bold text-slate-500 mb-3">ุงูุดูุฑ ุงููุนุฑูุถ: <span id="calendarTitle">--</span></div>
          <div id="calendarGrid" class="grid grid-cols-7 gap-2"></div>
        </div>
      </div>

      <!-- Detailed Table -->
      <div class="table-card glass-card overflow-hidden">
        <div class="table-header p-6 bg-slate-50 border-b border-slate-100 flex justify-between items-center no-print">
          <h4 class="font-bold text-lg text-[#0b2447]">ุงูุณุฌู ุงูุชูุตููู</h4>
          <input type="text" id="searchInput" onkeyup="searchTable()" placeholder="ุจุญุซ ุณุฑูุน..." class="table-search px-4 py-2 border rounded-xl text-sm outline-none focus:ring-2 focus:ring-cyan-500 w-64">
        </div>
        <div class="overflow-x-auto">
          <table class="w-full text-right" id="mainTable">
            <thead class="bg-slate-50 text-slate-500 text-xs font-bold uppercase">
              <tr>
                <th class="px-6 py-4">ุงูุชุงุฑูุฎ</th>
                <th class="px-6 py-4">ุงูุฎูู</th>
                <th class="px-6 py-4">ุงูุจุฑูุงูุฌ</th>
                <th class="px-6 py-4">ุงููุฏุฉ</th>
                <th class="px-6 py-4">ุงูุญุงูุฉ ุงูุตุญูุฉ</th>
                <th class="px-6 py-4 text-center no-print">ุงููุฑูู</th>
              </tr>
            </thead>
            <tbody id="tableBody" class="divide-y divide-slate-100 text-sm"></tbody>
          </table>
        </div>
      </div>

      <div id="pdf-footer" class="hidden text-center text-[10px] text-slate-400 mt-10 pt-5 border-t">
        ุฌููุน ุงูุญููู ูุญููุธุฉ - ูุฑุจุท ุฌุงุฏุง ููุฃุตุงูุฉ ยฉ 2026 | ุชู ุงูุชุตุฏูุฑ ุจูุงุณุทุฉ ุงููุธุงู ุงูุฐูู
      </div>
    </main>
  </div>

  <script src="assets/js/data.js"></script>
  <script src="assets/js/filters.js"></script>
  <script src="assets/js/charts.js"></script>
  <script src="assets/js/calendar.js"></script>
  <script src="assets/js/table.js"></script>
  <script src="assets/js/pdf.js"></script>
  <script src="assets/js/app.js"></script>
</body>
</html>
